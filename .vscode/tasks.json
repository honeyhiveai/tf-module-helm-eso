{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Terraform: Format",
      "type": "shell",
      "command": "terraform",
      "args": ["fmt", "-recursive"],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Terraform: Validate",
      "type": "shell",
      "command": "terraform",
      "args": ["validate"],
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "TFLint: Check",
      "type": "shell",
      "command": "tflint",
      "args": ["--recursive"],
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Trivy: Security Scan",
      "type": "shell",
      "command": "trivy",
      "args": ["fs", "--config", ".trivy.yaml", "."],
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Terraform Docs: Generate",
      "type": "shell",
      "command": "terraform-docs",
      "args": ["markdown", "table", "--output-file", "README.md", "."],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Run All Quality Checks",
      "dependsOrder": "sequence",
      "dependsOn": [
        "Terraform: Format",
        "Terraform: Validate",
        "TFLint: Check",
        "Trivy: Security Scan"
      ],
      "group": {
        "kind": "test",
        "isDefault": true
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      }
    }
  ]
}
